<div class="c-input-field">
    <div class="c-input">
        <p class="label">
            {{ label }}
            @if (showRequiredMark) {
            <span class="required">*</span>
            }
        </p>

        <mat-form-field appearance="outline" class="w-100" [ngClass]="{ 'field-invalid': hasError }">
            <mat-select [placeholder]="placeholder" [multiple]="multiple" [disabled]="disabled" [value]="value"
                (selectionChange)="onSelectionChange($event)" (blur)="markAsTouched()">
                @if (!multiple) {
                <mat-option [value]="''">
                    Todos
                </mat-option>
                }

                @for (opt of options; track opt.id) {
                <mat-option [value]="opt.id" [disabled]="opt.disabled">
                    {{ opt.name }}
                </mat-option>
                }
            </mat-select>

            @if (hasValue) {
            <button type="button" matSuffix mat-icon-button [disableRipple]="true"
                (mousedown)="$event.preventDefault(); $event.stopPropagation()"
                (click)="$event.stopPropagation(); clearSelection()" aria-label="Limpiar selecciÃ³n">
                <mat-icon class="color-third">close</mat-icon>
            </button>
            }
        </mat-form-field>

        @if (hasError) {
        <span class="field-error">{{ firstErrorMessage }}</span>
        }
    </div>
</div>